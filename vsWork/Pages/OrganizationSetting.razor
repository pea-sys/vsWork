@page "/organizationSetting"
@inherits vsWork.Shared.BasePage
@using Fluxor
@using vsWork.Stores
@using vsWork.Shared
@using vsWork.Utils
<EditForm Model="@settingData" OnValidSubmit="OnClickRegist">
    <FluentValidationValidator @ref="fluentValidationValidator " />
    <DataAnnotationsValidator />
    <Microsoft.AspNetCore.Components.Forms.ValidationSummary />
    <div class="form-group">
        <label for="id">OrganizationID</label>
        <input type="text" name="id" disabled="@(SettingState.Value.Mode != SettingMode.Add)" @bind-value="settingData.OrganizationId" maxlength="100" class="form-control" />
    </div>
    <div class="form-group">
        <label for="name">OrganizationName</label>
        <input type="text" name="name" @bind-value="settingData.OrganizationName" maxlength="100" class="form-control" />
    </div>
    <button class="btn btn-primary" type="submit">設定</button>

</EditForm>
@code {
    [Inject]
    private IState<SettingState<Organization>> SettingState { get; set; }

    private Organization settingData = new Organization();
    protected override void OnInitialized()
    {
        settingData = SettingState.Value.SelectedData;
        base.OnInitialized();
    }

    private async Task OnClickRegist()
    {
        Dispatcher.Dispatch(new OrganizationSettingAction(settingData));
    }
}
