@page "/"

<EditForm Model="@authUser" OnValidSubmit="OnValidSubmit">
    <FluentValidationValidator @ref="fluentValidationValidator " />
    <DataAnnotationsValidator />
    <Microsoft.AspNetCore.Components.Forms.ValidationSummary />
    <div class="form-group">
        <label for="id">UserID</label>
        <input type="text" name="id" @bind-value="authUser.UserId" maxlength="100" class="form-control" />
    </div>
    <div class="form-group">
        <label for="pass">Password</label>
        <input type="password" name="pass" @bind-value="authUser.Password" maxlength="100" class="form-control" />
    </div>
    <div class="form-group">
        <input type="checkbox" name="isChache" @bind-value="isCache">
        <label for="isChache">ログイン状態を維持</label>
    </div>
    <button class="btn btn-primary" type="submit">ログイン</button>
    <div>アカウントをお持ちでない方は<a href="/SignUp">こちらから</a>登録お願いします</div>
</EditForm>

@code{
    [Inject]
    private NavigationManager NavManager { get; set; }
    [Inject]
    private UserActionService userActionService { get; set; }

    private FluentValidationValidator fluentValidationValidator;
    private User authUser = new User();
    private bool isCache = false;

    /// <summary>
    /// サブミット押下処理
    /// </summary>
    private async Task OnValidSubmit()
    {
        userActionService.SignIn(authUser.UserId);
        NavManager.NavigateTo("top");
    }
}
